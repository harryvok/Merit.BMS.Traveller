@using System.Configuration
@using System.Web
@using System.Web.Optimization
@using Merit.Traveller.BMS

<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-merit-com-au" data-template-set="html5-reset">
    <meta charset="utf-8" />
    <meta name="author" content="Jon Cleary">
    <meta name="Copyright" content="Copyright Merit Technology Pty Ltd. 2012. All Rights Reserved.">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link href="@Url.Content("~/Content/Images/Icons/favicon.png")" rel="shortcut icon" type="image/x-icon" />
    @System.Web.Optimization.Styles.Render("~/Content/css/BMS")
    @System.Web.Optimization.Scripts.Render("~/Content/scripts/BMS")
    @RenderSection("scripts", false)
    <script src="@Url.Content("~/Scripts/ViewModels/PopupViewModel.js")"></script>
    <script src="@Url.Content("~/Scripts/ViewModels/SearchViewModel.js")"></script>
    <meta name="description" content="overview &amp; stats">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="http://responsiweb.com/themes/preview/ace/1.3.1/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
    <!-- page specific plugin styles -->
    <!-- text fonts -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300">
    <!-- ace styles -->
    <link rel="stylesheet" href="/Content/CSS/ace.min.css" id="main-ace-style">
    <!--[if lte IE 9]>
        <link rel="stylesheet" href="assets/css/ace-part2.min.css" />
    <![endif]-->
    <link rel="stylesheet" href="http://responsiweb.com/themes/preview/ace/1.3.1/assets/css/ace-skins.min.css">
    <link rel="stylesheet" href="http://responsiweb.com/themes/preview/ace/1.3.1/assets/css/ace-rtl.min.css">
    <!--[if lte IE 9]>
      <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
    <![endif]-->
    <!-- inline styles related to this page -->
    <!-- ace settings handler -->
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/ace-extra.min.js"></script>

    <script type="text/javascript">
        var ViewModels = {
            Popup: new PopupViewModel(),
            Search: new SearchViewModel()
        };

    </script>

    <title>Merit Traveller BMS - @ViewBag.Title</title>
</head>

<body class="no-skin" style="margin-top:40px">
@{
    if (Request.IsAuthenticated && Request.Cookies["userSurname"] != null)
    {
    <header >
                
                <div id="headerContainer">
                    <nav>
                        <img id="bannerLogo" border="0" src="@Url.Content("~/Content/Images/logo.png")" alt="Merit Technology"  >
                        <span id="userDetails">@Request.Cookies["userGivenName"].Value @Request.Cookies["userSurname"].Value </span>
                        <!--<a href="@Url.Action("logoff", "account")"><b>LOGOUT</b></a>-->
                        <span id="bannerMeritName">Merit Immigration</span>
                    </nav>
                    
                </div>
            </header>
    <div id="banner" class="navbar navbar-default" style="background-image: url(Content/Images/banner3.png); background-size: 100% 100%; background-repeat: no-repeat; ">
        <script type="text/javascript">
            try { ace.settings.check('navbar', 'fixed') } catch (e) { }
        </script>

        <div class="navbar-container" id="navbar-container">
            <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler">
                <span class="sr-only">Toggle sidebar</span>

                <span class="icon-bar"></span>

                <span class="icon-bar"></span>

                <span class="icon-bar"></span>
            </button>

            <div class="navbar-header pull-left">
                <a href="#" class="navbar-brand">
                    <h2 class="pageTitle">@ViewBag.Title</h2>

                </a>
            </div>

            <div class="navbar-buttons navbar-header pull-right" role="navigation">
                <ul class="nav ace-nav">

                    <li class="light-blue">
                        <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                            
                            <span class="user-info">
                               <b>@Request.Cookies["centralName"].Value</b>
                                
                            </span>

                            <i class="ace-icon fa fa-caret-down"></i>
                        </a>

                        <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                            <li>
                                <a href="#">
                                    <i class="ace-icon fa fa-cog"></i>
                                    Settings
                                </a>
                            </li>

                            <li>
                                <a href="profile.html">
                                    <i class="ace-icon fa fa-user"></i>
                                    Profile
                                </a>
                            </li>

                            <li class="divider"></li>

                            <li style="height:40px;" align="center">
                      
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div><!-- /.navbar-container -->
    </div>
    <input hidden id="url" type="text" value="" />
    <div class="main-container" id="main-container">
        <script type="text/javascript">
            try { ace.settings.check('main-container', 'fixed') } catch (e) { }
        </script>

        <div id="sidebar" class="sidebar                  responsive">
            <script type="text/javascript">
                try { ace.settings.check('sidebar', 'fixed') } catch (e) { }
            </script>

            <ul class="nav nav-list" style="top: 0px;">
                <li class="active">
                    <a href="@Url.Action("Index", "Dashboard")">
                        <i class="menu-icon fa fa-tachometer"></i>
                        <span class="menu-text"> Dashboard </span>
                    </a>
                    <b class="arrow"></b>
                </li>
                <li class="hsub">
                    <a href="@Url.Action("Index", "PermitIntray", new { visaReg = "Y" })">
                        <i class="menu-icon fa fa-desktop"></i>
                        <span class="menu-text"> Visa Registration </span>
                    </a>
                    <b class="arrow"></b>
                </li>
                <script>
                    function getPaging(str) {
                        $("#loading-content").load("dataSearch.php?" + str, hideLoader);
                    }
                </script>
                <li class="hsub" onclick="getPaging(this.id);">
                    <a href="@Url.Action("Index", "PermitIntray")">
                    <i class="menu-icon fa fa-list"></i>
                    <span class="menu-text">Permits</span>
                    </a>
                    <b class="arrow"></b>
                </li>
                <li class="hsub" onclick="getPaging(this.id);">
                    <a href="@Url.Action("Index", "Messages")">
                    <i class="menu-icon fa fa-list"></i>
                    <span class="menu-text">Messages(<span id="unreadmsgs"></span>)</span>
                    </a>
                    <b class="arrow"></b>
                </li>
                <li class="hsub">
                    <a href="#" class="dropdown-toggle">
                        <i class="menu-icon fa fa-pencil-square-o"></i>
                        <span class="menu-text"> Contact us </span>

                        <b class="arrow fa fa-angle-down"></b>
                    </a>
                    <b class="arrow"></b>
                    <ul class="submenu">
                        <li class="">
                            <a href="form-elements.html">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Support
                            </a>

                            <b class="arrow"></b>
                        </li>
                        <li class="">
                            <a href="form-wizard.html">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Contact
                            </a>

                            <b class="arrow"></b>
                        </li>
                    </ul>
                </li>
            </ul><!-- /.nav-list -->
            <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
                <i class="ace-icon fa fa-angle-double-left" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
            </div>
            <script type="text/javascript">
                try { ace.settings.check('sidebar', 'collapsed') } catch (e) { }
            </script>
        </div>
        <div class="main-content">
            <div class="breadcrumbs" id="breadcrumbs">
                <script type="text/javascript">
                    try { ace.settings.check('breadcrumbs', 'fixed') } catch (e) { }
                </script>
                <ul class="breadcrumb">
                    <li>
                        <i class="ace-icon fa fa-home home-icon"></i>
                        <a href="#">Home</a>
                    </li>
                    <li class="active">@ViewBag.Title</li>
                </ul><!-- /.breadcrumb -->
            </div>
            <div class="">
                <div id="homemaincontent">
                    @RenderBody()
                </div>
            </div><!-- /.page-content -->
        </div><!-- /.main-content -->
        @*<div class="footer">
            <div class="footer-inner">
                <div class="footer-content">
                    <span class="bigger-120">
                        <span class="blue bolder">Ace</span>
                        Application © 2013-2014
                    </span>
                    &nbsp; &nbsp;
                    <span class="action-buttons">
                        <a href="#">
                            <i class="ace-icon fa fa-twitter-square light-blue bigger-150"></i>
                        </a>
                        <a href="#">
                            <i class="ace-icon fa fa-facebook-square text-primary bigger-150"></i>
                        </a>
                        <a href="#">
                            <i class="ace-icon fa fa-rss-square orange bigger-150"></i>
                        </a>
                    </span>
                </div>
            </div>
        </div>*@
        <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
            <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
        </a>
    </div><!-- /.main-container -->


    @*<!--[if IE]>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <![endif]-->
    <!--[if !IE]> -->
    <script type="text/javascript">
        window.jQuery || document.write("<script src='assets/js/jquery.min.js'>" + "<" + "/script>");
    </script>
    <!-- <![endif]-->
    <!--[if IE]>
    <script type="text/javascript">
     window.jQuery || document.write("<script src='assets/js/jquery1x.min.js'>"+"<"+"/script>");
    </script>
    <![endif]-->
    <script type="text/javascript">
        if ('ontouchstart' in document.documentElement) document.write("<script src='http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
    </script>
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/jquery.mobile.custom.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <!-- page specific plugin scripts -->
    <!--[if lte IE 8]>
      <script src="assets/js/excanvas.min.js"></script>
    <![endif]-->*@
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/jquery-ui.custom.min.js"></script>
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/jquery.ui.touch-punch.min.js"></script>
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/jquery.easypiechart.min.js"></script>
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/jquery.sparkline.min.js"></script>
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/flot/jquery.flot.min.js"></script>
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/flot/jquery.flot.pie.min.js"></script>
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/flot/jquery.flot.resize.min.js"></script>
    <!-- ace scripts -->
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/ace-elements.min.js"></script>
    <script src="http://responsiweb.com/themes/preview/ace/1.3.1/assets/js/ace.min.js"></script>




    <div class="tooltip top in" style="display: none;"><div class="tooltip-inner"></div></div>
    }
    else
    {
        <div id="wrapper">
            <div id="content-container-nli">

                <div class="content not-logged-in" id="content">
                    @RenderBody()
                </div>

            </div>
        </div>
    }
}
</body>
</html>
<script type="text/javascript">
    $(document).ready(function () {
        ko.applyBindings(ViewModels);

        function openSiteDialog() {
            $("#changeSiteDialog").dialog("open");
            $('#changeSiteDialog').css("background-color", "rgb(182, 197, 224)");
        };
        function openVideoDialog() {
            $("#videoDialog").dialog("open");
            $("#videoDialog").css("background-color", "rgb(182, 197, 224)");
        };

        function changeSite() {
            $.ajax({
                type: "POST",
                url: '@Url.Action("changeSite", "permitIntray")',
                async: false,
                data: {
                    site: $("#changedSite").val(),

                },
                success: function (result) {
                    location.reload();
                }
            });
        }

        $("#videoDialog").dialog({
            resizable: false,
            dialogClass: 'teststyle',
            minHeight: 600,
            width: 900,
            show: { effect: 'fade', duration: 500 },
            hide: { effect: 'fade', duration: 200 },
            autoOpen: false,
            title: "Video tutorials",
            close: function (event, ui) { }
        });

        $("#changeSiteDialog").dialog({
            resizable: false,
            dialogClass: 'teststyle',
            minHeight: 137,
            width: 250,
            show: { effect: 'fade', duration: 500 },
            hide: { effect: 'fade', duration: 200 },
            autoOpen: false,
            title: "Change Site",
            close: function (event, ui) { }
        });


        $("#searchInput").hide();
        
        var alias = $('#webAppAlias').val();
        $.ajax({
            type: "POST",
            url: '@Url.Action("getNumberUnreadMessages", "Messages")',
            async: false,
            data: {

            },
            success: function (result) {
                $("#unreadmsgs").html(result.number);

            }
        });
    });
</script>